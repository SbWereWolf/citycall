# Решение

MySql 8.0, развернуть дамп из \20180600\task-1-2-3\setup\prj_baykal_service_test.sql

Скрипты из requestes.sql подписаны в соответствии с номерами заданий

Примечание : в решении третьего задания при вводе строкового значения для параметра :NAME, требуется использовать кавычки, числовые значения без кавычек. 

# Задание
Разработать SQL-запросы для заданий 1, 2, 3.

Для выполнения заданий требуется восстановить БД из дампа prj_baykal_service_test.sql

Описание модели данных БД:

outgoing_calls_naumen_2015-04 - попытки дозвона (таблицы могут быть за другие месяца)

stat_naumen - история открытий карточек

call_list - таблица задач на прозвон

call_history - таблица изменения статусов по задачам

Связи:

outgoing_calls_naumen_2015-04.idStat=stat_naumen.id

call_history.id_stat=stat_naumen.id

call_history.id_call_list=call_list.id
 
Задание 1.

Необходимо получить статистику вида (Отчет по недозвонам). Поля: Дата дозвона, Номер задачи, Время дозвона, Причина недозвона

Номер задачи - call_list.TaskRef

Причина недозвона - call_history.reason_notdial

остальные поля смотрите по связям

Ожидаемый результат: Разработанный SQL запрос.

Задание 2.

Получить последний статус (из таблицы call_history) по каждой заявке. Поля: Номер задачи, Дата и время статуса, Статус

Ожидаемый результат: Разработанный SQL запрос.

Задание 3.

Создать таблицу. В ней 3 поля: 
- ID (int), 
- NAME (varchar), 
- DATETIME (datetime). 

ID сделать первичным ключом и при добавлении чтобы он увеличивался на 1 (автоинкремент). NAME - сделать уникальным ключем. Необходимо написать запрос на добавление записи в таблицу, в случае если NAME уже есть, нужно обновить DATETIME

Ожидаемый результат: Разработанный SQL запрос.

# Обратная связь
Баги не исключены :) пишите - починим.

Вольхин Николай, +7-902-272-65-35, ulfnew@gmail.com
